// –£–ª—É—á—à–µ–Ω–Ω—ã–π Triage –∞–Ω–∞–ª–∏–∑ —Å —É–º–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
export async function getTriageAnalysis({ symptomsDescription }: { symptomsDescription: string }) {
  // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ API
  await new Promise(resolve => setTimeout(resolve, 2000 + Math.random() * 3000));
  
  const description = symptomsDescription.toLowerCase();
  
  // –£–º–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å–∏–º–ø—Ç–æ–º–æ–≤
  const getRiskLevel = (desc: string) => {
    // –ê–Ω–∞–ª–∏–∑ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏ —Å–∏–º–ø—Ç–æ–º–æ–≤
    const intensityWords = {
      critical: ['–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏', '–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ', '—ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ', '—ç–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è', '–Ω–µ—Å—Ç–µ—Ä–ø–∏–º–æ', '–Ω–µ—Å—Ç–µ—Ä–ø–∏–º–∞—è', '–º—É—á–∏—Ç–µ–ª—å–Ω–æ', '–º—É—á–∏—Ç–µ–ª—å–Ω–∞—è'],
      high: ['–æ—á–µ–Ω—å', '—Å–∏–ª—å–Ω–æ', '—Å–∏–ª—å–Ω–∞—è', '—Å–∏–ª—å–Ω—ã–µ', '–æ—Å—Ç—Ä–∞—è', '–æ—Å—Ç—Ä–∞—è', '–Ω–µ–≤—ã–Ω–æ—Å–∏–º–æ', '–Ω–µ–≤—ã–Ω–æ—Å–∏–º–∞—è', '—É–∂–∞—Å–Ω–æ', '—É–∂–∞—Å–Ω–∞—è'],
      medium: ['–¥–æ–≤–æ–ª—å–Ω–æ', '–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ', '–∑–∞–º–µ—Ç–Ω–æ', '–æ—â—É—Ç–∏–º–æ', '—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ'],
      low: ['—Å–ª–µ–≥–∫–∞', '–Ω–µ–º–Ω–æ–≥–æ', '—á—É—Ç—å-—á—É—Ç—å', '–ª–µ–≥–∫–æ', '–ª–µ–≥–∫–∞—è', '–ª–µ–≥–∫–∏–µ']
    };

    // –ê–Ω–∞–ª–∏–∑ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏–º–ø—Ç–æ–º–æ–≤
    const criticalLocations = ['–∂–∏–≤–æ—Ç', '–∂–∏–≤–æ—Ç–µ', '–Ω–∏–∑—É –∂–∏–≤–æ—Ç–∞', '–Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ –∂–∏–≤–æ—Ç–∞', '—Ç–∞–∑', '—Ç–∞–∑–æ–≤–æ–π –æ–±–ª–∞—Å—Ç–∏'];
    const pregnancyTerms = ['—Ç—Ä–∏–º–µ—Å—Ç—Ä', '—Ç—Ä–∏–º–µ—Å—Ç—Ä–µ', '—Å—Ä–æ–∫', '—Å—Ä–æ–∫–∞—Ö', '–±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏', '–±–µ—Ä–µ–º–µ–Ω–Ω–∞—è', '–±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏'];
    
    // –ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    const timeIndicators = ['—á–∞—Å–æ–≤', '–º–∏–Ω—É—Ç', '–¥–Ω–µ–π', '–Ω–µ–¥–µ–ª—å', '–ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è', '–¥–ª–∏—Ç—Å—è', '—É–∂–µ'];
    const urgentTime = ['—Å–µ–π—á–∞—Å', '—Ç–æ–ª—å–∫–æ —á—Ç–æ', '–≤–Ω–µ–∑–∞–ø–Ω–æ', '—Ä–µ–∑–∫–æ', '–º–≥–Ω–æ–≤–µ–Ω–Ω–æ'];
    
    // –ê–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    const emotionalWords = ['–±–æ—é—Å—å', '—Å—Ç—Ä–∞—à–Ω–æ', '–ø–∞–Ω–∏–∫–∞', '–ø–∞–Ω–∏–∫—É—é', '–≤–æ–ª–Ω—É—é—Å—å', '–ø–µ—Ä–µ–∂–∏–≤–∞—é', '—Ç—Ä–µ–≤–æ–∂–Ω–æ'];
    
    // –ü–æ–¥—Å—á–µ—Ç –æ—á–∫–æ–≤ —Ä–∏—Å–∫–∞
    let riskScore = 0;
    
    // 1. –ê–Ω–∞–ª–∏–∑ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏
    for (const [level, words] of Object.entries(intensityWords)) {
      const foundWords = words.filter(word => desc.includes(word));
      if (foundWords.length > 0) {
        switch (level) {
          case 'critical': riskScore += 40; break;
          case 'high': riskScore += 25; break;
          case 'medium': riskScore += 10; break;
          case 'low': riskScore += 2; break;
        }
      }
    }
    
    // 2. –ê–Ω–∞–ª–∏–∑ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏)
    const hasCriticalLocation = criticalLocations.some(loc => desc.includes(loc));
    const hasPregnancyContext = pregnancyTerms.some(term => desc.includes(term));
    
    if (hasCriticalLocation && hasPregnancyContext) {
      riskScore += 35; // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è
    } else if (hasCriticalLocation) {
      riskScore += 20;
    }
    
    // 3. –ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–∏
    const hasTimeUrgency = urgentTime.some(time => desc.includes(time));
    const hasTimeDuration = timeIndicators.some(time => desc.includes(time));
    
    if (hasTimeUrgency) riskScore += 15;
    if (hasTimeDuration) riskScore += 5;
    
    // 4. –ê–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    const hasEmotionalStress = emotionalWords.some(emotion => desc.includes(emotion));
    if (hasEmotionalStress) riskScore += 10;
    
    // 5. –ê–Ω–∞–ª–∏–∑ –¥–ª–∏–Ω—ã –∏ –¥–µ—Ç–∞–ª—å–Ω–æ—Å—Ç–∏ –æ–ø–∏—Å–∞–Ω–∏—è
    if (desc.length > 200) riskScore += 5; // –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
    if (desc.length > 100) riskScore += 3;
    
    // 6. –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã
    const medicalTerms = ['–∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ', '–∫—Ä–æ–≤—å', '—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞', '–∂–∞—Ä', '—Å—É–¥–æ—Ä–æ–≥–∏', '—Å—É–¥–æ—Ä–æ–≥–∞', '—Ä–≤–æ—Ç–∞', '—Ç–æ—à–Ω–æ—Ç–∞'];
    const foundMedicalTerms = medicalTerms.filter(term => desc.includes(term));
    riskScore += foundMedicalTerms.length * 8;
    
    // 7. –ê–Ω–∞–ª–∏–∑ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–ª–æ–≤ (—É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å)
    const words = desc.split(/\s+/);
    const wordCounts: Record<string, number> = {};
    words.forEach(word => {
      wordCounts[word] = (wordCounts[word] || 0) + 1;
    });
    const repeatedWords = Object.values(wordCounts).filter((count: number) => count > 1).length;
    riskScore += repeatedWords * 3;
    
    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Ä–∏—Å–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—á–∫–æ–≤
    if (riskScore >= 50) return 'high';
    if (riskScore >= 25) return 'medium';
    return 'low';
  };
  
  const riskLevel = getRiskLevel(description);
  
  // –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  console.log('–ê–Ω–∞–ª–∏–∑ —Å–∏–º–ø—Ç–æ–º–æ–≤:', {
    description: symptomsDescription,
    riskLevel,
    descriptionLength: description.length
  });
  
  // –£–º–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
  const getRecommendations = (risk: string, desc: string) => {
    // –ê–Ω–∞–ª–∏–∑ —Å–∏–º–ø—Ç–æ–º–æ–≤
    const symptoms = {
      pain: /–±–æ–ª—å|–±–æ–ª–∏—Ç|–±–æ–ª–µ–≤—ã–µ|–±–æ–ª–µ–∑–Ω–µ–Ω–Ω/i.test(desc),
      abdominalPain: /–∂–∏–≤–æ—Ç|–∂–∏–≤–æ—Ç–µ|–Ω–∏–∑—É –∂–∏–≤–æ—Ç–∞|—Ç–∞–∑/i.test(desc),
      nausea: /—Ç–æ—à–Ω–æ—Ç–∞|—Ä–≤–æ—Ç–∞|—Ç–æ—à–Ω–∏—Ç/i.test(desc),
      bleeding: /–∫—Ä–æ–≤—å|–∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ|–∫—Ä–æ–≤–∏—Ç/i.test(desc),
      temperature: /—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞|–∂–∞—Ä|–≥–æ—Ä—è—á/i.test(desc),
      breathing: /–¥—ã—à–∞—Ç—å|–¥—ã—Ö–∞–Ω–∏–µ|–∑–∞–¥—ã—Ö–∞—é—Å—å/i.test(desc),
      dizziness: /–≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ|–∫—Ä—É–∂–∏—Ç—Å—è|—Å–ª–∞–±–æ—Å—Ç—å/i.test(desc),
      contractions: /—Å—Ö–≤–∞—Ç–∫–∏|—Å—Ö–≤–∞—Ç–∫–æ–æ–±—Ä–∞–∑–Ω|—Å–æ–∫—Ä–∞—â–µ–Ω–∏—è/i.test(desc)
    };
    
    // –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏
    const pregnancyContext = {
      trimester: /—Ç—Ä–∏–º–µ—Å—Ç—Ä|—Å—Ä–æ–∫|–±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏/i.test(desc),
      thirdTrimester: /3 —Ç—Ä–∏–º–µ—Å—Ç—Ä|—Ç—Ä–µ—Ç–∏–π —Ç—Ä–∏–º–µ—Å—Ç—Ä|–ø–æ–∑–¥–Ω–∏—Ö —Å—Ä–æ–∫–∞—Ö/i.test(desc),
      timeDuration: /—á–∞—Å–æ–≤|–º–∏–Ω—É—Ç|–¥–Ω–µ–π|–ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è|–¥–ª–∏—Ç—Å—è/i.test(desc),
      urgency: /—Å–µ–π—á–∞—Å|–≤–Ω–µ–∑–∞–ø–Ω–æ|—Ä–µ–∑–∫–æ|—Ç–æ–ª—å–∫–æ —á—Ç–æ/i.test(desc)
    };
    
    // –ê–Ω–∞–ª–∏–∑ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏ (–¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
    // const intensity = {
    //   critical: /–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏|—ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ|–Ω–µ—Å—Ç–µ—Ä–ø–∏–º–æ|–º—É—á–∏—Ç–µ–ª—å–Ω–æ/i.test(desc),
    //   high: /–æ—á–µ–Ω—å|—Å–∏–ª—å–Ω–æ|—Å–∏–ª—å–Ω–∞—è|–Ω–µ–≤—ã–Ω–æ—Å–∏–º–æ|—É–∂–∞—Å–Ω–æ/i.test(desc),
    //   medium: /–¥–æ–≤–æ–ª—å–Ω–æ|–∑–∞–º–µ—Ç–Ω–æ|–æ—â—É—Ç–∏–º–æ/i.test(desc),
    //   low: /—Å–ª–µ–≥–∫–∞|–Ω–µ–º–Ω–æ–≥–æ|–ª–µ–≥–∫–æ/i.test(desc)
    // };
    
    if (risk === 'high') {
      let specificAdvice = '';
      let emergencyActions = '';
      let generalAdvice = '';
      
      // –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –°–õ–£–ß–ê–ò
      if (symptoms.abdominalPain && pregnancyContext.thirdTrimester) {
        emergencyActions += 'üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø: –ë–æ–ª–∏ –≤ –∂–∏–≤–æ—Ç–µ –Ω–∞ –ø–æ–∑–¥–Ω–∏—Ö —Å—Ä–æ–∫–∞—Ö!\n';
        emergencyActions += '‚Ä¢ –ù–ï–ú–ï–î–õ–ï–ù–ù–û –≤—ã–∑–æ–≤–∏—Ç–µ —Å–∫–æ—Ä—É—é –ø–æ–º–æ—â—å (103)\n';
        emergencyActions += '‚Ä¢ –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—á–∞–ª–æ–º —Ä–æ–¥–æ–≤ –∏–ª–∏ –æ—Å–ª–æ–∂–Ω–µ–Ω–∏–µ–º\n';
        emergencyActions += '‚Ä¢ –°–æ–æ–±—â–∏—Ç–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä—É –æ —Å—Ä–æ–∫–µ –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏\n';
        emergencyActions += '‚Ä¢ –°–æ–±–µ—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –≤–µ—â–∏ –¥–ª—è —Ä–æ–¥–¥–æ–º–∞\n\n';
      }
      
      if (symptoms.bleeding) {
        emergencyActions += '‚Ä¢ –ü—Ä–∏ –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–∏ - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤—ã–∑–æ–≤–∏—Ç–µ —Å–∫–æ—Ä—É—é –ø–æ–º–æ—â—å\n';
        emergencyActions += '‚Ä¢ –ü—Ä–∏–ª–æ–∂–∏—Ç–µ —á–∏—Å—Ç—É—é —Ç–∫–∞–Ω—å –∫ –º–µ—Å—Ç—É –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏—è\n';
        emergencyActions += '‚Ä¢ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∞–º–ø–æ–Ω—ã –ø—Ä–∏ –≤–∞–≥–∏–Ω–∞–ª—å–Ω–æ–º –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–∏\n\n';
      }
      
      if (symptoms.contractions && pregnancyContext.thirdTrimester) {
        emergencyActions += '‚Ä¢ –ü—Ä–∏ —Å—Ö–≤–∞—Ç–∫–∞—Ö –Ω–∞ –ø–æ–∑–¥–Ω–∏—Ö —Å—Ä–æ–∫–∞—Ö - —Å—Ä–æ—á–Ω–æ –≤ —Ä–æ–¥–¥–æ–º\n';
        emergencyActions += '‚Ä¢ –ó–∞—Å–µ–∫–∞–π—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –º–µ–∂–¥—É —Å—Ö–≤–∞—Ç–∫–∞–º–∏\n';
        emergencyActions += '‚Ä¢ –ü—Ä–∏ —Å—Ö–≤–∞—Ç–∫–∞—Ö –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç - –µ—Ö–∞—Ç—å –≤ —Ä–æ–¥–¥–æ–º\n\n';
      }
      
      // –°–ü–ï–¶–ò–§–ò–ß–ï–°–ö–ò–ï –°–û–í–ï–¢–´
      if (symptoms.temperature) {
        specificAdvice += '‚Ä¢ –ò–∑–º–µ—Ä—å—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –∏ –∑–∞–ø–∏—à–∏—Ç–µ –≤—Ä–µ–º—è\n';
        specificAdvice += '‚Ä¢ –ü—Ä–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ –≤—ã—à–µ 38.5¬∞C - —Å—Ä–æ—á–Ω–æ –∫ –≤—Ä–∞—á—É\n';
        specificAdvice += '‚Ä¢ –ü–µ–π—Ç–µ –±–æ–ª—å—à–µ –∂–∏–¥–∫–æ—Å—Ç–∏\n';
      }
      
      if (symptoms.breathing) {
        specificAdvice += '‚Ä¢ –ü—Ä–∏ –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–Ω–æ–º –¥—ã—Ö–∞–Ω–∏–∏ - —Å—Ä–æ—á–Ω–æ –∫ –≤—Ä–∞—á—É\n';
        specificAdvice += '‚Ä¢ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—ã—à–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ –∏ –≥–ª—É–±–æ–∫–æ\n';
        specificAdvice += '‚Ä¢ –ü—Ä–∏ —É—Ö—É–¥—à–µ–Ω–∏–∏ - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤—ã–∑—ã–≤–∞–π—Ç–µ —Å–∫–æ—Ä—É—é\n';
      }
      
      if (symptoms.pain && !symptoms.abdominalPain) {
        specificAdvice += '‚Ä¢ –ü—Ä–∏ —Å–∏–ª—å–Ω–æ–π –±–æ–ª–∏ - –Ω–µ —Ç–µ—Ä–ø–∏—Ç–µ, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∑–∞ –ø–æ–º–æ—â—å—é\n';
        specificAdvice += '‚Ä¢ –ù–µ –ø—Ä–∏–Ω–∏–º–∞–π—Ç–µ –æ–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–∏–µ –±–µ–∑ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –≤—Ä–∞—á–∞\n';
        specificAdvice += '‚Ä¢ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏\n';
      }
      
      // –û–ë–©–ò–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò
      generalAdvice += '‚Ä¢ –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É –∏–ª–∏ –≤—ã–∑–æ–≤–∏—Ç–µ —Å–∫–æ—Ä—É—é –ø–æ–º–æ—â—å (103)\n';
      generalAdvice += '‚Ä¢ –ù–µ –ø—Ä–∏–Ω–∏–º–∞–π—Ç–µ –Ω–∏–∫–∞–∫–∏—Ö –ª–µ–∫–∞—Ä—Å—Ç–≤ –±–µ–∑ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –≤—Ä–∞—á–∞\n';
      generalAdvice += '‚Ä¢ –°–æ–æ–±—â–∏—Ç–µ –≤—Ä–∞—á—É –æ –≤—Å–µ—Ö —Å–∏–º–ø—Ç–æ–º–∞—Ö –∏ –∏—Ö –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏\n';
      generalAdvice += '‚Ä¢ –ü—Ä–∏ —É—Ö—É–¥—à–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è - –Ω–µ –∂–¥–∏—Ç–µ, –≤—ã–∑—ã–≤–∞–π—Ç–µ —Å–∫–æ—Ä—É—é\n';
      generalAdvice += '‚Ä¢ –í–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ –∏ –∑–¥–æ—Ä–æ–≤—å–µ –º–∞–ª—ã—à–∞ - —ç—Ç–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç!';
      
      return `üö® –í–ù–ò–ú–ê–ù–ò–ï: –í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞!

${emergencyActions}${specificAdvice}

–û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
${generalAdvice}`;
    }
    
    if (risk === 'medium') {
      let specificAdvice = '';
      
      if (symptoms.nausea) {
        specificAdvice += '‚Ä¢ –ü—Ä–∏ —Ç–æ—à–Ω–æ—Ç–µ - –ø–µ–π—Ç–µ –≤–æ–¥—É –º–∞–ª–µ–Ω—å–∫–∏–º–∏ –≥–ª–æ—Ç–∫–∞–º–∏\n';
        specificAdvice += '‚Ä¢ –ò–∑–±–µ–≥–∞–π—Ç–µ —Ä–µ–∑–∫–∏—Ö –¥–≤–∏–∂–µ–Ω–∏–π\n';
      }
      
      if (symptoms.pain) {
        specificAdvice += '‚Ä¢ –ü—Ä–∏ –±–æ–ª–∏ - –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏\n';
        specificAdvice += '‚Ä¢ –û—Ç–¥—ã—Ö–∞–π—Ç–µ –≤ —É–¥–æ–±–Ω–æ–π –ø–æ–∑–µ\n';
      }
      
      return `‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞

${specificAdvice}

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
‚Ä¢ –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É –≤ –±–ª–∏–∂–∞–π—à–∏–µ 24-48 —á–∞—Å–æ–≤
‚Ä¢ –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–∏–º–ø—Ç–æ–º–∞—Ö
‚Ä¢ –ü—Ä–∏ —É—Ö—É–¥—à–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É
‚Ä¢ –ü–µ–π—Ç–µ –±–æ–ª—å—à–µ –≤–æ–¥—ã –∏ –æ—Ç–¥—ã—Ö–∞–π—Ç–µ
‚Ä¢ –ò–∑–±–µ–≥–∞–π—Ç–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫
‚Ä¢ –í–µ–¥–∏—Ç–µ –¥–Ω–µ–≤–Ω–∏–∫ —Å–∏–º–ø—Ç–æ–º–æ–≤

–ï—Å–ª–∏ —Å–∏–º–ø—Ç–æ–º—ã —É—Ö—É–¥—à–∞—é—Ç—Å—è –∏–ª–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ - –Ω–µ –∂–¥–∏—Ç–µ, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É.`;
    }
    
    return `‚úÖ –ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
‚Ä¢ –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Å–≤–æ–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
‚Ä¢ –ü—Ä–∏ —É—Ö—É–¥—à–µ–Ω–∏–∏ —Å–∏–º–ø—Ç–æ–º–æ–≤ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É
‚Ä¢ –°–æ–±–ª—é–¥–∞–π—Ç–µ —Ä–µ–∂–∏–º –¥–Ω—è –∏ –∑–¥–æ—Ä–æ–≤–æ–µ –ø–∏—Ç–∞–Ω–∏–µ
‚Ä¢ –ü–µ–π—Ç–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–æ–¥—ã (8-10 —Å—Ç–∞–∫–∞–Ω–æ–≤ –≤ –¥–µ–Ω—å)
‚Ä¢ –û—Ç–¥—ã—Ö–∞–π—Ç–µ –∏ –∏–∑–±–µ–≥–∞–π—Ç–µ —Å—Ç—Ä–µ—Å—Å–æ–≤
‚Ä¢ –†–µ–≥—É–ª—è—Ä–Ω–æ –ø–æ—Å–µ—â–∞–π—Ç–µ –≤—Ä–∞—á–∞ –¥–ª—è –ø–ª–∞–Ω–æ–≤—ã—Ö –æ—Å–º–æ—Ç—Ä–æ–≤
‚Ä¢ –í–µ–¥–∏—Ç–µ –¥–Ω–µ–≤–Ω–∏–∫ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è

–ï—Å–ª–∏ —Å–∏–º–ø—Ç–æ–º—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–Ω–µ–π –∏–ª–∏ —É—Ö—É–¥—à–∞—é—Ç—Å—è - –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏.`;
  };
  
  const recommendations = getRecommendations(riskLevel, description);
  
  return {
    success: true,
    riskLevel,
    recommendations
  };
}
